(kicad_sch (version 20230121) (generator eeschema)

  (uuid 2f8df419-2b34-4527-9994-c68df68adb44)

  (paper "A4")

  (title_block
    (title "BMS-Master overview")
    (date "2023-12-29")
    (rev "V1.0")
    (company "Valais Wallis Racing Team")
    (comment 1 "BÃ©trisey Mattia")
  )

  (lib_symbols
    (symbol "Mechanical:Fiducial" (in_bom yes) (on_board yes)
      (property "Reference" "FID" (at 0 5.08 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "Fiducial" (at 0 3.175 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "fiducial marker" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Fiducial Marker" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "Fiducial*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "Fiducial_0_1"
        (circle (center 0 0) (radius 1.27)
          (stroke (width 0.508) (type default))
          (fill (type background))
        )
      )
    )
  )


  (wire (pts (xy 87.63 59.69) (xy 95.25 59.69))
    (stroke (width 0) (type default))
    (uuid 2840616f-58b3-407d-b097-15f0698c1d25)
  )
  (wire (pts (xy 143.51 72.39) (xy 156.21 72.39))
    (stroke (width 0) (type default))
    (uuid 2e3cefd5-7b12-4dac-955b-befb39cb8675)
  )
  (bus (pts (xy 87.63 100.33) (xy 95.25 100.33))
    (stroke (width 0) (type default))
    (uuid 458d165e-a954-4e27-afce-14d8d7ff1e37)
  )
  (bus (pts (xy 87.63 30.48) (xy 166.37 30.48))
    (stroke (width 0) (type default))
    (uuid 4660da5c-a429-4345-b1ea-f65dcc114aab)
  )

  (wire (pts (xy 87.63 57.15) (xy 95.25 57.15))
    (stroke (width 0) (type default))
    (uuid 48eb14ee-e6cb-4f62-b9da-310f07e18bd4)
  )
  (wire (pts (xy 154.94 59.69) (xy 166.37 59.69))
    (stroke (width 0) (type default))
    (uuid 4bfb11de-cf0b-4cc0-bf97-441e37b21940)
  )
  (bus (pts (xy 87.63 45.72) (xy 92.71 45.72))
    (stroke (width 0) (type default))
    (uuid 546d767f-265b-4ce9-ab60-e8e33c7814a8)
  )
  (bus (pts (xy 87.63 73.66) (xy 95.25 73.66))
    (stroke (width 0) (type default))
    (uuid 5c9d1650-02d1-4ab8-811a-2f2df23472fc)
  )

  (wire (pts (xy 156.21 63.5) (xy 156.21 72.39))
    (stroke (width 0) (type default))
    (uuid 6ee8dbfc-4766-4507-b01f-7233ad573961)
  )
  (bus (pts (xy 30.48 127) (xy 30.48 137.16))
    (stroke (width 0) (type default))
    (uuid 77168c99-da6f-47bd-b27f-3e36db964428)
  )
  (bus (pts (xy 34.29 133.35) (xy 36.83 133.35))
    (stroke (width 0) (type default))
    (uuid 8b7912c4-abe6-4a9e-8fb9-04c51d39524c)
  )
  (bus (pts (xy 87.63 96.52) (xy 95.25 96.52))
    (stroke (width 0) (type default))
    (uuid 9bdd1047-400e-4837-b8f0-aa849771bb3c)
  )

  (wire (pts (xy 154.94 57.15) (xy 166.37 57.15))
    (stroke (width 0) (type default))
    (uuid bb7213bd-f9f7-4c31-803a-faadb400df32)
  )
  (bus (pts (xy 30.48 137.16) (xy 36.83 137.16))
    (stroke (width 0) (type default))
    (uuid bc437da7-51d1-4505-b86a-95d641740c78)
  )
  (bus (pts (xy 87.63 36.83) (xy 95.25 36.83))
    (stroke (width 0) (type default))
    (uuid c73af6d9-e0b6-461c-9da3-98c130d0dd34)
  )
  (bus (pts (xy 161.29 45.72) (xy 166.37 45.72))
    (stroke (width 0) (type default))
    (uuid d3d6d992-90bf-40ec-9277-99ad8c3f6dfa)
  )
  (bus (pts (xy 87.63 71.12) (xy 95.25 71.12))
    (stroke (width 0) (type default))
    (uuid d8c5506f-04c6-408b-93f4-191ac5cd1079)
  )
  (bus (pts (xy 154.94 36.83) (xy 166.37 36.83))
    (stroke (width 0) (type default))
    (uuid e26891ca-88c5-4a85-b1f1-95f227d6c525)
  )

  (wire (pts (xy 154.94 63.5) (xy 156.21 63.5))
    (stroke (width 0) (type default))
    (uuid e8698dca-f4b1-480b-b825-19e740bd9a24)
  )
  (bus (pts (xy 34.29 127) (xy 34.29 133.35))
    (stroke (width 0) (type default))
    (uuid ffd5a959-1a3d-432a-a173-7f69f1d3bc9f)
  )

  (symbol (lib_id "Mechanical:Fiducial") (at 173.99 132.08 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 281cc1ed-c70e-46a1-b442-da1bca93f725)
    (property "Reference" "FID2" (at 176.53 130.81 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "Fiducial" (at 176.53 133.35 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "FS_Connector:fiducial 2mm with 3mm mask" (at 173.99 132.08 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 173.99 132.08 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "DESCRIPTION" "not mounted" (at 173.99 132.08 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (instances
      (project "BMS-Slave"
        (path "/2c0db601-9492-4d4b-ba6d-047aa55963a8"
          (reference "FID2") (unit 1)
        )
      )
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44"
          (reference "FID2") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Mechanical:Fiducial") (at 173.99 127 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 5e6fb85f-79f7-4981-a07d-473658ee19df)
    (property "Reference" "FID1" (at 176.53 125.73 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "Fiducial" (at 176.53 128.27 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "FS_Connector:fiducial 2mm with 3mm mask" (at 173.99 127 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 173.99 127 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "DESCRIPTION" "not mounted" (at 173.99 127 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (instances
      (project "BMS-Slave"
        (path "/2c0db601-9492-4d4b-ba6d-047aa55963a8"
          (reference "FID1") (unit 1)
        )
      )
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44"
          (reference "FID1") (unit 1)
        )
      )
    )
  )

  (sheet (at 95.25 93.98) (size 33.02 8.89) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid 0690b5d8-dbae-494b-8d72-68cda5668381)
    (property "Sheetname" "CAN0_interface" (at 95.25 93.2684 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "CAN0_interface.kicad_sch" (at 95.25 103.4546 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "CAN1{TX RX TRANS_STBY_CTRL}" bidirectional (at 95.25 100.33 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 030322b2-6520-4762-a2c8-593cb0afac22)
    )
    (pin "CAN0{TX RX TRANS_STBY_CTRL}" bidirectional (at 95.25 96.52 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 3983d62a-0fbf-458b-b634-b3d349aaa1c4)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "13"))
      )
    )
  )

  (sheet (at 95.25 34.29) (size 59.69 5.08) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid 550d3233-bed4-4af7-83cb-d67f69e20bbb)
    (property "Sheetname" "USB_interface" (at 95.25 33.5784 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "USB_interface.kicad_sch" (at 95.25 39.9546 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "FTDI_MCU0{TX RX DTR RTS}" bidirectional (at 95.25 36.83 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 6444beab-bdf5-48e3-a7a1-505407a9bcb3)
    )
    (pin "FTDI_MCU1{TX RX DTR RTS}" bidirectional (at 154.94 36.83 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid c85a0c23-e1bb-498c-8d24-deb8f25e172e)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "8"))
      )
    )
  )

  (sheet (at 95.25 68.58) (size 48.26 7.62) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid a3b7f660-696c-48c0-98d9-30c2f3386a98)
    (property "Sheetname" "Contactors" (at 95.25 67.8684 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "Contactors.kicad_sch" (at 95.25 76.7846 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "Contactor_ctrl[0..2]" input (at 95.25 71.12 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 7f65cf45-5614-428f-b1c8-4325e6772304)
    )
    (pin "Contactor_feedback[0..2]" output (at 95.25 73.66 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 93c5973a-b200-4309-a489-789b15718b80)
    )
    (pin "contactors_com_pos" output (at 143.51 72.39 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid bcadbc71-7886-4336-adf2-531e52806fdc)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "11"))
      )
    )
  )

  (sheet (at 26.67 26.67) (size 60.96 100.33) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid cbd23270-ad0e-4ce8-b568-71748afc70c4)
    (property "Sheetname" "MCU0_primary" (at 26.67 25.9584 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "MCU0_primary.kicad_sch" (at 26.67 127.5846 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "MCU0_RAM{SDCLK SDCKE1 SDNE1 SDNRAS SDNCAS SDNWE NBL[0..1] BA[0..1] A[0..11] D[0..15]}" bidirectional (at 30.48 127 270)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 0efa7238-20c9-4fbd-9d83-64021b5165d0)
    )
    (pin "EEPROM{CS SCK MISO MOSI}" bidirectional (at 34.29 127 270)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 9480d06a-d000-46b3-b8d2-365900183881)
    )
    (pin "FTDI_MCU0{TX RX DTR RTS}" bidirectional (at 87.63 36.83 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 96aefdb3-e9b2-4689-9f14-31afebfdc9c1)
    )
    (pin "CAN0{TX RX TRANS_STBY_CTRL}" bidirectional (at 87.63 96.52 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid aaa789e2-bd70-404a-8001-5b34a3dca216)
    )
    (pin "MCU_to_MCU_INTERFACE_MCU0{CS MISO MOSI SCK}" bidirectional (at 87.63 30.48 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid b1b2a3a2-8955-49e9-b219-598b74ceecc9)
    )
    (pin "SHUTDOWN_ctrl_MCU0" output (at 87.63 57.15 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid b9d66430-34c5-46b3-8e43-a13e1013ddea)
    )
    (pin "SHUTDOWN_feedback_MCU0" input (at 87.63 59.69 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid b1a36a8e-5199-4b04-8706-7049036b6f08)
    )
    (pin "Contactor_feedback[0..2]" input (at 87.63 73.66 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid e7e5ce48-fe11-4109-b6d5-e93540c10f04)
    )
    (pin "Contactor_ctrl[0..2]" output (at 87.63 71.12 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 2e959ede-bf89-4195-a3dd-81440c6ada79)
    )
    (pin "CAN1{TX RX TRANS_STBY_CTRL}" bidirectional (at 87.63 100.33 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid ec7e1762-e329-42d4-978c-99c8bfae0b66)
    )
    (pin "isoSPI0{CS SCK MISO MOSI DIR}" bidirectional (at 87.63 45.72 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 6a9b95d0-0e35-4fd3-a5db-8d6d7efc290f)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "2"))
      )
    )
  )

  (sheet (at 95.25 54.61) (size 59.69 10.16) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid cdb7f671-802a-4d74-b357-123a0931fe67)
    (property "Sheetname" "Shutdown" (at 95.25 53.8984 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "Shutdown.kicad_sch" (at 95.25 65.3546 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "SHUTDOWN_feedback_MCU0" output (at 95.25 59.69 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid e366e1aa-3916-49e2-9f8d-6e8163dd11fd)
    )
    (pin "SHUTDOWN_feedback_MCU1" output (at 154.94 59.69 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid bb237661-4ac9-412d-a990-9f02721fd773)
    )
    (pin "SHUTDOWN_ctrl_MCU0" input (at 95.25 57.15 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 5419491f-44de-40d0-bea0-d6bcf21ee1bb)
    )
    (pin "SHUTDOWN_ctrl_MCU1" input (at 154.94 57.15 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid ccff215c-1b6d-45c7-ac93-48109871de4f)
    )
    (pin "contactors_com_pos" output (at 154.94 63.5 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 7b3ae0bf-d86b-4048-8b69-3ac37d570d15)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "10"))
      )
    )
  )

  (sheet (at 166.37 26.67) (size 59.69 41.91) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid d4476622-1866-48af-aa77-4b46bc3cdc0f)
    (property "Sheetname" "MCU1_secondary" (at 166.37 25.9584 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "MCU1_secondary.kicad_sch" (at 166.37 69.1646 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "FTDI_MCU1{TX RX DTR RTS}" bidirectional (at 166.37 36.83 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 48548a5e-81ec-49fe-9c43-53239945ebbc)
    )
    (pin "MCU_to_MCU_INTERFACE_MCU0{CS MISO MOSI SCK}" bidirectional (at 166.37 30.48 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 8ba4a374-5dd8-4fc1-b87b-a6ad81d85da4)
    )
    (pin "SHUTDOWN_ctrl_MCU0" output (at 166.37 57.15 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid c2dc7e64-86c2-4a03-9240-efadc743d3b6)
    )
    (pin "SHUTDOWN_feedback_MCU0" input (at 166.37 59.69 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid cfb40cfa-291a-48cb-979d-f58cbd3a03f7)
    )
    (pin "isoSPI1{CS SCK MISO MOSI DIR}" bidirectional (at 166.37 45.72 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 8465e20c-f5c3-4c34-a1ab-0011e4b3d11b)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "7"))
      )
    )
  )

  (sheet (at 92.71 43.18) (size 68.58 5.08) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid d9079884-1585-4112-a5bd-7109cb5f8a10)
    (property "Sheetname" "isoSPI_interface" (at 92.71 42.4684 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "isoSPI_interface.kicad_sch" (at 92.71 48.8446 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "isoSPI0{CS SCK MISO MOSI DIR}" bidirectional (at 92.71 45.72 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid dc91fd5a-5835-4b59-b5ed-8207eedb45e2)
    )
    (pin "isoSPI1{CS SCK MISO MOSI DIR}" bidirectional (at 161.29 45.72 0)
      (effects (font (size 1.27 1.27)) (justify right))
      (uuid 5323b6b9-f145-4475-b260-dae445bd1825)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "9"))
      )
    )
  )

  (sheet (at 36.83 130.81) (size 95.25 8.89) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid e7c13b69-0483-4745-a957-c5e119e16a10)
    (property "Sheetname" "MCU0_Memory" (at 36.83 130.0984 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "MCU0_Memory.kicad_sch" (at 36.83 140.2846 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (pin "MCU0_RAM{SDCLK SDCKE1 SDNE1 SDNRAS SDNCAS SDNWE NBL[0..1] BA[0..1] A[0..11] D[0..15]}" bidirectional (at 36.83 137.16 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid 01614af0-2232-45d7-af7d-20f29ab70479)
    )
    (pin "EEPROM{CS SCK MISO MOSI}" bidirectional (at 36.83 133.35 180)
      (effects (font (size 1.27 1.27)) (justify left))
      (uuid ea96c9b3-ee2b-43ca-a2e4-0a8538f6ee0e)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "14"))
      )
    )
  )

  (sheet (at 166.37 95.25) (size 40.64 13.97) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid f17cf9ab-87c6-4b61-94b9-41e3108ad3ba)
    (property "Sheetname" "Supply_iso" (at 166.37 94.5384 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "Supply_iso.kicad_sch" (at 166.37 109.8046 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "16"))
      )
    )
  )

  (sheet (at 166.37 76.2) (size 40.64 13.97) (fields_autoplaced)
    (stroke (width 0.1524) (type solid))
    (fill (color 0 0 0 0.0000))
    (uuid ffd48578-932b-4b43-9be1-95ccc4f64f9c)
    (property "Sheetname" "Supply0_primary" (at 166.37 75.4884 0)
      (effects (font (size 1.27 1.27)) (justify left bottom))
    )
    (property "Sheetfile" "Supply0_primary.kicad_sch" (at 166.37 90.7546 0)
      (effects (font (size 1.27 1.27)) (justify left top) hide)
    )
    (instances
      (project "BMS-Master"
        (path "/2f8df419-2b34-4527-9994-c68df68adb44" (page "15"))
      )
    )
  )

  (sheet_instances
    (path "/" (page "1"))
  )
)
